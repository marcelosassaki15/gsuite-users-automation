# gsuite-users-automation
Automated solution of creation and deletion users that uses from opened ticket on Jira Service Management to Google Admin.
This repository contains Terraform and Python (AWS Lambda) codes.

## Replace the *json* and *zip* files and check the variables
1. Generate the json credential on GCP Google Credentials
2. Enter the *files* folder and replace the following files:
```
- json credential of service account generated by Google Credentials. The credential hosted here is out of service!
- lambda_function.zip (Python codes for AWS Lambda)
```
3. Make sure these files are with the same name. If not, change the values located on *variables.tf*.
4. Check other variables if are correct (it is recommended do not change the *prefix* and *prod_stage* values!)

## Building the remote-state and lock state for Terraform structure
1. On Terminal, enter the *remote-state* folder and run the command:
```
terraform init
terraform apply
```

## Building the remote-state and lock state for Terraform structure
1. On the same Terminal session, go to *root* folder and run the following codes:
```
terraform init
terraform apply
```
2. After all, get the invoke URL for POST requests and the API key on AWS API Gateway (Plan usage > API keys section).

## Destroying the Terraform structure
1. Use **terraform destroy** in the *root* and *remote-state* (do not forget to empty the s3 folder on remote state) folders.
